![sheet](https://github.com/user-attachments/assets/2ce0d25b-5d4d-4097-955f-b39e2dbd9c2c)---
layout: post
title: "Accompaniment Generation for Melodies"
author: "Chandra Gummaluru"
categories: projects
---

This project concerns the creation of a machine learning model capable of adding accompaniments to melodies. The hope is that a user can upload a recording of themselves playing a melody, and then download the recording with a generated accompaniment added on.

## Acousitics and Music Theory
### Sounds and Waves
A sound is simply a vibration that propogates as an audible wave of pressure through a medium. We can represent sound mathematically as a wave. The simplest wave is arguably a sinusoidal wave, such as $A\cos(wt)$ where $A$ is the amplitude, $\omega$ is the angular frequency, and $t$ is time.

For example, we plot a 2 Hz sinusoidal wave, with an amplitude of 0.5, below:

It turns out that the average human can hear frequencies between 20 Hz to 22 kHz, and so the above wave would actually be inaudible. However, if we change the frequency to be within that range, say 440 Hz, it sounds something like this:

<audio controls src="https://github.com/chandra-gummaluru/chandra-gummaluru.github.io/raw/46cfd9d7f4f59a3df411da0092624402276d2c33/assets/440hz_wave.wav"></audio>

Since $\cos{t}$ is $2\pi$ periodic, the **temporal frequency**, $f$ of the wave is given by
$$f = \frac{\omega}{2\pi}.$$

The **percieved pitch** of a sound wave is directly proportional to this frequency. However, the **percieved pitch difference** between two sound waves is logarithmic w.r.t. the frequencies. For example, the pitch difference between a 220 Hz and 440 Hz wave is the same as that between the 440 Hz and an 880 Hz wave.

If we play the 220 Hz, 440 Hz and 880 Hz waves in succession, they sound like this:

<audio controls src="https://github.com/chandra-gummaluru/chandra-gummaluru.github.io/raw/1f5a0f9fec1039252bee5cfcae2c854674c61da8/assets/220hz_440hz_880hz_waves.wav"></audio>

### Musical Notes

Each pitch interval is seperated by 12 uniformally spaced points forming the 12 **notes** of the Western scale. The frequency of a note is thus exactly $\sqrt[12]{2}$ times that of the previous note. 

Conventionally, we denote these notes (in increasing pitch) with $\mathrm{A}$, $\mathrm{A}^♯$ or $\mathrm{B}^♭$, $\mathrm{B}$, $\mathrm{B}^♯$ or $\mathrm{C}^♭$, $\mathrm{C}$, $\mathrm{C}^♯$ or $\mathrm{D}^♭$, $\mathrm{D}$, $\mathrm{D}^♯$ or $\mathrm{E}^♭$, $\mathrm{E}$, $\mathrm{F}$, $\mathrm{F}^♯$ or $\mathrm{G}^♭$, and $\mathrm{G}$.

Any set of 12 consecutive notes is called an **octave**. Since music typically consists of notes from multiple octaves, subscripts are commonly used to denote which one a given note belongs to. For example, $\mathrm{G}_4$ refers to the $\mathrm{G}$ note of the 4th octave.

The frequency of $\mathrm{A}_4$ is 440 Hz, and so, the frequency (in Hz) of the $i$th note from $\mathrm{A}_4$, is given by $$440\times 2^{\frac{i}{12}},$$
where positive (resp. negative) values for $i$ indicate higher (resp. lower) pitch notes.

Note durations are defined in terms of **beats**. Commonly used notes and rests are defined in the table below:

<table width = 50%>
  <tr>
    <th style="text-align:center">Type</th>
    <th style="text-align:center">Note</th>
    <th style="text-align:center">Rest</th>
    <th style="text-align:center">Beats</th>
  </tr>
  <tr>
    <td style="text-align:center">Whole</td>
    <td><img src = "Music-wholenote.svg", width = 100% </img></td>
    <td><img src = "Music-wholerest.svg", width = 100% </img></td>
    <td style="text-align:center">$4$</td>
  </tr>
  <tr>
    <td style="text-align:center">Half</td>
    <td><img src = "Music-halfnote.svg", width = 100% </img></td>
    <td><img src = "Music-halfrest.svg", width = 100% </img></td>      
    <td style="text-align:center">$2$</td>
  </tr>
  <tr>
    <td style="text-align:center">Quarter</td>
    <td><img src = "Music-quarternote.svg", width = 100% </img></td>
    <td><img src = "Music-quarterrest.svg", width = 100% </img></td>    
    <td style="text-align:center">$1$</td>
  </tr>
  <tr>
    <td style="text-align:center">Eighth</td>
    <td><img src = "Music-eighthnote.svg", width = 100% </img></td>
    <td><img src = "Music-eighthrest.svg", width = 100% </img></td>
    <td style="text-align:center">$\frac{1}{2}$</td>
  </tr>
  <tr>
    <td style="text-align:center">Sixteenth</td>
    <td><img src = "Music-sixteenthnote.svg", width = 100% </img></td>
    <td><img src = "Music-sixteenthrest.svg", width = 100% </img></td>
    <td style="text-align:center">$\frac{1}{4}$</td>
  </tr>
</table>
Durations smaller than sixteenth do exist, but are used less often.

The absolute duration of a beat depends on the **tempo** of the piece, which is usually expressed in beats / min.

### The Piano
For the purpose of this project, we will be focusing on just piano music. On a piano, notes correspond to particular keys as shown below:

A standard piano consists of 7 octaves (starting with $\mathrm{C}_1$), plus a few additional notes, namely, $\mathrm{A}_0$, $\mathrm{A}^♯_0$ or $\mathrm{B}^♭_0$, $\mathrm{B}_0$ and $\mathrm{C}_8$, for a total of 88 keys.

Hence, the frequency (in Hz) of the $i$th key is given by $$440\times 2^{\frac{i - 49}{12}}, 1 \leq i \leq 88.$$

## Digital Music Representation
There are many ways to represent music digitally. We will consider three, starting with the most raw format, and ending with the most semantic one.

### Raw Samples
An obvious way is to simply sample the original wave periodically at some frequency, $f_s$.

For example, we can sample the 2 Hz sinusodial wave from earlier at a frequecy of 4 Hz as shown below:

At first, it appears that a lot of information is being lost in sampling. However, the **Nyquist sampling theorem** tells us perfect reconstruction is possible provided $f_s$ is at least twice the maximum frequency present in the signal. This minimum frequency is called the **Nyquist rate**.

Recalling from earlier that the maximum frequency an average human can hear is ~22 kHz, this explains why audio is typically sampled at 44.1 kHz.

For us though, since we are only dealing with piano music, we can get away with a sampling rate of only ~8392 Hz, since the maximum frequency a standard piano can produce is ~4196 Hz.

If a signal is sampled below the Nyquist rate, the signal cannot be uniquely reconstructed. This phenomena is called **aliasing**, and an example of it can be seen if we sample the 2 Hz wave from before at less than 4 Hz, as shown below:


This representation will not be suitable for training our model.

Musical patterns are very difficult to learn by just seeing raw samples, and even if we could in theory, the representation is extremely space inefficient, making it infeasible to do so in practice.

### Piano-Rolls
Of course, with music, a more natural representation can be obtained by plotting the notes that are playing at each time step, such as below:

For a standard piano, such a plot is essentially an $88 \times T$ matrix, $\mathbf{P}$, where $\mathbf{P}_{i,t} \in \lbrace 0, 1 \rbrace$ indicates if the $i$th note is playing at the $t$th time-step, for $1 \leq i \leq 88$ and $1 \leq t \leq T$.

We will refer to such a matrix as as a **piano-roll** - the one above sounds like this:

The problem with this representation is that the resulting matrix is typically very sparse since any given note is not playing for the vast majority of the time.

While it is arguably easier to see musical patterns in this representation, it still poses a problem for learning - a model could easily learn to never do anything since technically, it would be right most of the time.

### Sheet Music
Of course, the most semantic representation of music is probably in the form of sheet music, such as below:

<svg width="2976.38px" height="400px" viewBox="0 150 2976.38 350"
 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.2" baseProfile="tiny">
<title>0</title>
<desc>Generated by MuseScore 3.2.3</desc>
<polyline class="StaffLines" fill="none" stroke="#000000" stroke-width="2.00" stroke-linejoin="bevel" points="141.732,316.732 2834.65,316.732"/>
<polyline class="StaffLines" fill="none" stroke="#000000" stroke-width="2.00" stroke-linejoin="bevel" points="141.732,341.732 2834.65,341.732"/>
<polyline class="StaffLines" fill="none" stroke="#000000" stroke-width="2.00" stroke-linejoin="bevel" points="141.732,366.732 2834.65,366.732"/>
<polyline class="StaffLines" fill="none" stroke="#000000" stroke-width="2.00" stroke-linejoin="bevel" points="141.732,391.732 2834.65,391.732"/>
<polyline class="StaffLines" fill="none" stroke="#000000" stroke-width="2.00" stroke-linejoin="bevel" points="141.732,416.732 2834.65,416.732"/>
<polyline class="BarLine" fill="none" stroke="#000000" stroke-width="4.00" stroke-linejoin="bevel" points="1650.29,315.732 1650.29,417.732"/>
<polyline class="BarLine" fill="none" stroke="#000000" stroke-width="4.00" stroke-linejoin="bevel" points="2810.15,315.732 2810.15,417.732"/>
<polyline class="BarLine" fill="none" stroke="#000000" stroke-width="12.50" stroke-linejoin="bevel" points="2828.4,315.732 2828.4,417.732"/>
<polyline class="Stem" fill="none" stroke="#000000" stroke-width="3.25" stroke-linecap="round" stroke-linejoin="bevel" points="803.539,321.428 803.539,454.232"/>
<polyline class="Stem" fill="none" stroke="#000000" stroke-width="3.25" stroke-linecap="round" stroke-linejoin="bevel" points="1367.79,321.428 1367.79,454.232"/>
<polyline class="Stem" fill="none" stroke="#000000" stroke-width="3.25" stroke-linecap="round" stroke-linejoin="bevel" points="1963.39,321.428 1963.39,454.232"/>
<polyline class="Stem" fill="none" stroke="#000000" stroke-width="3.25" stroke-linecap="round" stroke-linejoin="bevel" points="2527.64,308.928 2527.64,444.857"/>
<path class="Note" d="M823.883,365.467 C827.008,365.467 829.648,366.279 831.804,367.904 C833.815,369.665 834.82,371.878 834.82,374.545 C834.82,379.034 832.513,383.232 827.898,387.139 C823.211,391.045 818.195,392.998 812.851,392.998 C809.726,392.998 807.091,392.185 804.945,390.56 C802.924,388.8 801.914,386.586 801.914,383.92 C801.914,379.43 804.258,375.232 808.945,371.326 C813.508,367.42 818.487,365.467 823.883,365.467"/>
<path class="Note" d="M823.883,340.467 C827.008,340.467 829.648,341.279 831.804,342.904 C833.815,344.665 834.82,346.878 834.82,349.545 C834.82,354.034 832.513,358.232 827.898,362.139 C823.211,366.045 818.195,367.998 812.851,367.998 C809.726,367.998 807.091,367.185 804.945,365.56 C802.924,363.8 801.914,361.586 801.914,358.92 C801.914,354.43 804.258,350.232 808.945,346.326 C813.508,342.42 818.487,340.467 823.883,340.467"/>
<path class="Note" d="M823.883,302.967 C827.008,302.967 829.648,303.779 831.804,305.404 C833.815,307.165 834.82,309.378 834.82,312.045 C834.82,316.534 832.513,320.732 827.898,324.639 C823.211,328.545 818.195,330.498 812.851,330.498 C809.726,330.498 807.091,329.685 804.945,328.06 C802.924,326.3 801.914,324.086 801.914,321.42 C801.914,316.93 804.258,312.732 808.945,308.826 C813.508,304.92 818.487,302.967 823.883,302.967"/>
<path class="Note" d="M1388.14,365.467 C1391.26,365.467 1393.9,366.279 1396.06,367.904 C1398.07,369.665 1399.07,371.878 1399.07,374.545 C1399.07,379.034 1396.77,383.232 1392.15,387.139 C1387.46,391.045 1382.45,392.998 1377.11,392.998 C1373.98,392.998 1371.34,392.185 1369.2,390.56 C1367.18,388.8 1366.17,386.586 1366.17,383.92 C1366.17,379.43 1368.51,375.232 1373.2,371.326 C1377.76,367.42 1382.74,365.467 1388.14,365.467"/>
<path class="Note" d="M1388.14,340.467 C1391.26,340.467 1393.9,341.279 1396.06,342.904 C1398.07,344.665 1399.07,346.878 1399.07,349.545 C1399.07,354.034 1396.77,358.232 1392.15,362.139 C1387.46,366.045 1382.45,367.998 1377.11,367.998 C1373.98,367.998 1371.34,367.185 1369.2,365.56 C1367.18,363.8 1366.17,361.586 1366.17,358.92 C1366.17,354.43 1368.51,350.232 1373.2,346.326 C1377.76,342.42 1382.74,340.467 1388.14,340.467"/>
<path class="Note" d="M1388.14,302.967 C1391.26,302.967 1393.9,303.779 1396.06,305.404 C1398.07,307.165 1399.07,309.378 1399.07,312.045 C1399.07,316.534 1396.77,320.732 1392.15,324.639 C1387.46,328.545 1382.45,330.498 1377.11,330.498 C1373.98,330.498 1371.34,329.685 1369.2,328.06 C1367.18,326.3 1366.17,324.086 1366.17,321.42 C1366.17,316.93 1368.51,312.732 1373.2,308.826 C1377.76,304.92 1382.74,302.967 1388.14,302.967"/>
<path class="Note" d="M1983.73,365.467 C1986.86,365.467 1989.5,366.279 1991.66,367.904 C1993.67,369.665 1994.67,371.878 1994.67,374.545 C1994.67,379.034 1992.36,383.232 1987.75,387.139 C1983.06,391.045 1978.05,392.998 1972.7,392.998 C1969.58,392.998 1966.94,392.185 1964.8,390.56 C1962.78,388.8 1961.77,386.586 1961.77,383.92 C1961.77,379.43 1964.11,375.232 1968.8,371.326 C1973.36,367.42 1978.34,365.467 1983.73,365.467"/>
<path class="Note" d="M1983.73,340.467 C1986.86,340.467 1989.5,341.279 1991.66,342.904 C1993.67,344.665 1994.67,346.878 1994.67,349.545 C1994.67,354.034 1992.36,358.232 1987.75,362.139 C1983.06,366.045 1978.05,367.998 1972.7,367.998 C1969.58,367.998 1966.94,367.185 1964.8,365.56 C1962.78,363.8 1961.77,361.586 1961.77,358.92 C1961.77,354.43 1964.11,350.232 1968.8,346.326 C1973.36,342.42 1978.34,340.467 1983.73,340.467"/>
<path class="Note" d="M1983.73,302.967 C1986.86,302.967 1989.5,303.779 1991.66,305.404 C1993.67,307.165 1994.67,309.378 1994.67,312.045 C1994.67,316.534 1992.36,320.732 1987.75,324.639 C1983.06,328.545 1978.05,330.498 1972.7,330.498 C1969.58,330.498 1966.94,329.685 1964.8,328.06 C1962.78,326.3 1961.77,324.086 1961.77,321.42 C1961.77,316.93 1964.11,312.732 1968.8,308.826 C1973.36,304.92 1978.34,302.967 1983.73,302.967"/>
<path class="Note" d="M2547.99,352.967 C2551.11,352.967 2553.75,353.779 2555.91,355.404 C2557.92,357.165 2558.93,359.378 2558.93,362.045 C2558.93,366.534 2556.62,370.732 2552,374.639 C2547.32,378.545 2542.3,380.498 2536.96,380.498 C2533.83,380.498 2531.2,379.685 2529.05,378.06 C2527.03,376.3 2526.02,374.086 2526.02,371.42 C2526.02,366.93 2528.36,362.732 2533.05,358.826 C2537.61,354.92 2542.59,352.967 2547.99,352.967"/>
<path class="Note" d="M2547.99,327.967 C2551.11,327.967 2553.75,328.779 2555.91,330.404 C2557.92,332.165 2558.93,334.378 2558.93,337.045 C2558.93,341.534 2556.62,345.732 2552,349.639 C2547.32,353.545 2542.3,355.498 2536.96,355.498 C2533.83,355.498 2531.2,354.685 2529.05,353.06 C2527.03,351.3 2526.02,349.086 2526.02,346.42 C2526.02,341.93 2528.36,337.732 2533.05,333.826 C2537.61,329.92 2542.59,327.967 2547.99,327.967"/>
<path class="Note" d="M2547.99,290.467 C2551.11,290.467 2553.75,291.279 2555.91,292.904 C2557.92,294.665 2558.93,296.878 2558.93,299.545 C2558.93,304.034 2556.62,308.232 2552,312.139 C2547.32,316.045 2542.3,317.998 2536.96,317.998 C2533.83,317.998 2531.2,317.185 2529.05,315.56 C2527.03,313.8 2526.02,311.586 2526.02,308.92 C2526.02,304.43 2528.36,300.232 2533.05,296.326 C2537.61,292.42 2542.59,290.467 2547.99,290.467"/>
<path class="Clef" d="M198.451,366.139 C198.451,366.139 198.649,366.139 199.045,366.139 C199.305,366.076 199.529,366.045 199.717,366.045 C207.008,366.045 212.998,368.618 217.685,373.764 C222.373,378.836 224.717,384.758 224.717,391.529 C224.717,399.935 221.237,406.774 214.279,412.045 C212.456,413.482 210.076,414.654 207.139,415.56 C207.472,419.79 207.639,423.206 207.639,425.81 C207.639,426.331 207.571,428.222 207.435,431.482 C207.175,437.534 205.092,442.774 201.185,447.201 C197.415,451.566 192.727,453.748 187.123,453.748 C181.852,453.748 177.362,451.894 173.654,448.185 C169.935,444.404 168.076,439.847 168.076,434.514 C168.076,431.711 169.154,429.331 171.31,427.373 C173.519,425.425 176.086,424.451 179.014,424.451 C181.618,424.451 183.8,425.461 185.56,427.482 C187.383,429.368 188.295,431.711 188.295,434.514 C188.295,437.045 187.383,439.222 185.56,441.045 C183.737,442.868 181.555,443.779 179.014,443.779 C177.972,443.779 176.967,443.586 175.998,443.201 C178.862,447.43 182.67,449.545 187.42,449.545 C191.909,449.545 195.586,447.722 198.451,444.076 C201.451,440.305 203.081,435.909 203.342,430.889 C203.467,427.764 203.529,425.977 203.529,425.529 C203.529,421.883 203.399,418.889 203.139,416.545 C199.889,417.066 196.993,417.326 194.451,417.326 C185.399,417.326 177.685,413.743 171.31,406.576 C165.06,399.347 161.935,390.753 161.935,380.795 C161.935,378.711 162.128,376.597 162.514,374.451 C162.909,372.691 163.399,370.769 163.982,368.685 C164.305,367.508 165.185,365.618 166.623,363.014 C167.144,362.232 167.73,361.256 168.381,360.084 C169.032,358.912 169.487,358.133 169.748,357.748 C170.394,356.446 171.659,354.685 173.545,352.467 C174.066,351.883 174.605,351.235 175.162,350.521 C175.719,349.808 176.193,349.222 176.584,348.764 C176.974,348.305 177.266,347.946 177.459,347.685 C177.652,347.425 179.118,345.701 181.857,342.514 C182.503,341.857 183.136,341.157 183.756,340.412 C184.376,339.667 184.881,339.081 185.271,338.654 C185.662,338.227 185.956,337.92 186.154,337.732 C183.81,329.982 182.342,323.795 181.748,319.17 C181.3,315.461 181.076,310.383 181.076,303.935 C181.076,298.269 182.378,292.961 184.982,288.014 C187.514,282.878 191.06,278.68 195.623,275.42 C195.883,275.222 196.206,275.123 196.592,275.123 C197.05,275.123 197.378,275.222 197.576,275.42 C201.086,279.649 204.112,285.149 206.654,291.92 C209.258,298.691 210.56,304.847 210.56,310.389 C210.56,316.639 209.066,322.498 206.076,327.967 C202.691,333.758 198.326,339.748 192.982,345.935 C194.347,350.227 196.17,356.961 198.451,366.139 M206.748,411.56 C210.133,410.321 212.774,408.206 214.67,405.217 C216.753,402.352 217.795,399.128 217.795,395.545 C217.795,390.92 216.232,386.816 213.107,383.232 C209.909,379.524 205.836,377.441 200.889,376.982 C203.691,390.722 205.644,402.248 206.748,411.56 M168.967,388.998 C168.967,395.446 171.571,401.112 176.779,405.998 C182.112,410.748 188.102,413.123 194.748,413.123 C197.477,413.123 200.144,412.925 202.748,412.529 C201.706,402.633 199.654,390.784 196.592,376.982 C192.883,377.378 189.925,378.68 187.717,380.889 C185.56,383.17 184.482,385.743 184.482,388.607 C184.482,393.555 187.123,397.56 192.404,400.623 C192.852,401.081 193.076,401.571 193.076,402.092 C193.076,402.612 192.852,403.097 192.404,403.545 C192.008,404.003 191.519,404.232 190.935,404.232 C190.873,404.232 190.581,404.17 190.06,404.045 C186.342,402.024 183.477,399.42 181.467,396.232 C179.571,392.836 178.623,389.415 178.623,385.967 C178.623,381.477 180.024,377.409 182.826,373.764 C185.753,370.118 189.56,367.774 194.248,366.732 C192.425,359.441 190.93,353.743 189.764,349.639 C188.722,350.816 187.469,352.232 186.006,353.889 C184.542,355.545 183.68,356.54 183.42,356.873 C181.076,359.925 179.284,362.3 178.045,363.998 C175.826,367.06 174.196,369.696 173.154,371.904 C172.05,374.383 171.076,377.086 170.232,380.014 C169.389,382.816 168.967,385.81 168.967,388.998 M201.576,289.685 C196.691,292.092 192.852,295.54 190.06,300.029 C187.196,304.654 185.764,309.633 185.764,314.967 C185.764,319.654 186.935,325.972 189.279,333.92 C193.967,328.253 197.482,323.014 199.826,318.201 C202.295,313.118 203.529,307.81 203.529,302.279 C203.529,298.112 202.878,293.915 201.576,289.685"/>
<path class="KeySig" d="M396.248,360.389 C396.248,361.628 395.631,362.248 394.396,362.248 C393.162,362.248 392.545,361.628 392.545,360.389 L392.545,345.935 L384.248,349.06 L384.248,364.873 C384.248,366.112 383.628,366.732 382.389,366.732 C381.149,366.732 380.529,366.112 380.529,364.873 L380.529,350.326 L377.404,351.498 C377.342,351.56 377.081,351.592 376.623,351.592 C376.102,351.592 375.646,351.396 375.256,351.006 C374.865,350.615 374.67,350.159 374.67,349.639 L374.67,343.592 C374.67,342.612 375.092,341.993 375.935,341.732 L380.529,340.17 L380.529,324.154 L377.404,325.232 C377.342,325.295 377.081,325.326 376.623,325.326 C376.102,325.326 375.646,325.131 375.256,324.74 C374.865,324.349 374.67,323.894 374.67,323.373 L374.67,317.31 C374.67,316.404 375.092,315.821 375.935,315.56 L380.529,313.795 L380.529,298.076 C380.529,296.836 381.149,296.217 382.389,296.217 C383.628,296.217 384.248,296.836 384.248,298.076 L384.248,312.529 L392.545,309.404 L392.545,293.592 C392.545,292.352 393.162,291.732 394.396,291.732 C395.631,291.732 396.248,292.352 396.248,293.592 L396.248,308.139 L399.482,306.967 C399.545,306.904 399.769,306.873 400.154,306.873 C400.612,306.873 401.102,307.066 401.623,307.451 C402.019,307.847 402.217,308.305 402.217,308.826 L402.217,314.873 C402.217,315.79 401.758,316.409 400.842,316.732 L396.248,318.295 L396.248,334.31 L399.482,333.232 C399.545,333.17 399.769,333.139 400.154,333.139 C400.612,333.139 401.102,333.336 401.623,333.732 C402.019,334.118 402.217,334.571 402.217,335.092 L402.217,341.154 C402.217,341.998 401.758,342.581 400.842,342.904 L396.248,344.67 L396.248,360.389 M392.545,319.764 L384.248,322.685 L384.248,338.701 L392.545,335.779 L392.545,319.764 "/>
<path class="KeySig" d="M371.248,410.389 C371.248,411.628 370.631,412.248 369.396,412.248 C368.162,412.248 367.545,411.628 367.545,410.389 L367.545,395.935 L359.248,399.06 L359.248,414.873 C359.248,416.112 358.628,416.732 357.389,416.732 C356.149,416.732 355.529,416.112 355.529,414.873 L355.529,400.326 L352.404,401.498 C352.342,401.56 352.081,401.592 351.623,401.592 C351.102,401.592 350.646,401.396 350.256,401.006 C349.865,400.615 349.67,400.159 349.67,399.639 L349.67,393.592 C349.67,392.612 350.092,391.993 350.935,391.732 L355.529,390.17 L355.529,374.154 L352.404,375.232 C352.342,375.295 352.081,375.326 351.623,375.326 C351.102,375.326 350.646,375.131 350.256,374.74 C349.865,374.349 349.67,373.894 349.67,373.373 L349.67,367.31 C349.67,366.404 350.092,365.821 350.935,365.56 L355.529,363.795 L355.529,348.076 C355.529,346.836 356.149,346.217 357.389,346.217 C358.628,346.217 359.248,346.836 359.248,348.076 L359.248,362.529 L367.545,359.404 L367.545,343.592 C367.545,342.352 368.162,341.732 369.396,341.732 C370.631,341.732 371.248,342.352 371.248,343.592 L371.248,358.139 L374.482,356.967 C374.545,356.904 374.769,356.873 375.154,356.873 C375.612,356.873 376.102,357.066 376.623,357.451 C377.019,357.847 377.217,358.305 377.217,358.826 L377.217,364.873 C377.217,365.79 376.758,366.409 375.842,366.732 L371.248,368.295 L371.248,384.31 L374.482,383.232 C374.545,383.17 374.769,383.139 375.154,383.139 C375.612,383.139 376.102,383.336 376.623,383.732 C377.019,384.118 377.217,384.571 377.217,385.092 L377.217,391.154 C377.217,391.998 376.758,392.581 375.842,392.904 L371.248,394.67 L371.248,410.389 M367.545,369.764 L359.248,372.685 L359.248,388.701 L367.545,385.779 L367.545,369.764 "/>
<path class="KeySig" d="M346.248,372.889 C346.248,374.128 345.631,374.748 344.396,374.748 C343.162,374.748 342.545,374.128 342.545,372.889 L342.545,358.435 L334.248,361.56 L334.248,377.373 C334.248,378.612 333.628,379.232 332.389,379.232 C331.149,379.232 330.529,378.612 330.529,377.373 L330.529,362.826 L327.404,363.998 C327.342,364.06 327.081,364.092 326.623,364.092 C326.102,364.092 325.646,363.896 325.256,363.506 C324.865,363.115 324.67,362.659 324.67,362.139 L324.67,356.092 C324.67,355.112 325.092,354.493 325.935,354.232 L330.529,352.67 L330.529,336.654 L327.404,337.732 C327.342,337.795 327.081,337.826 326.623,337.826 C326.102,337.826 325.646,337.631 325.256,337.24 C324.865,336.849 324.67,336.394 324.67,335.873 L324.67,329.81 C324.67,328.904 325.092,328.321 325.935,328.06 L330.529,326.295 L330.529,310.576 C330.529,309.336 331.149,308.717 332.389,308.717 C333.628,308.717 334.248,309.336 334.248,310.576 L334.248,325.029 L342.545,321.904 L342.545,306.092 C342.545,304.852 343.162,304.232 344.396,304.232 C345.631,304.232 346.248,304.852 346.248,306.092 L346.248,320.639 L349.482,319.467 C349.545,319.404 349.769,319.373 350.154,319.373 C350.612,319.373 351.102,319.566 351.623,319.951 C352.019,320.347 352.217,320.805 352.217,321.326 L352.217,327.373 C352.217,328.29 351.758,328.909 350.842,329.232 L346.248,330.795 L346.248,346.81 L349.482,345.732 C349.545,345.67 349.769,345.639 350.154,345.639 C350.612,345.639 351.102,345.836 351.623,346.232 C352.019,346.618 352.217,347.071 352.217,347.592 L352.217,353.654 C352.217,354.498 351.758,355.081 350.842,355.404 L346.248,357.17 L346.248,372.889 M342.545,332.264 L334.248,335.185 L334.248,351.201 L342.545,348.279 L342.545,332.264 "/>
<path class="KeySig" d="M321.248,335.389 C321.248,336.628 320.631,337.248 319.396,337.248 C318.162,337.248 317.545,336.628 317.545,335.389 L317.545,320.935 L309.248,324.06 L309.248,339.873 C309.248,341.112 308.628,341.732 307.389,341.732 C306.149,341.732 305.529,341.112 305.529,339.873 L305.529,325.326 L302.404,326.498 C302.342,326.56 302.081,326.592 301.623,326.592 C301.102,326.592 300.646,326.396 300.256,326.006 C299.865,325.615 299.67,325.159 299.67,324.639 L299.67,318.592 C299.67,317.612 300.092,316.993 300.935,316.732 L305.529,315.17 L305.529,299.154 L302.404,300.232 C302.342,300.295 302.081,300.326 301.623,300.326 C301.102,300.326 300.646,300.131 300.256,299.74 C299.865,299.349 299.67,298.894 299.67,298.373 L299.67,292.31 C299.67,291.404 300.092,290.821 300.935,290.56 L305.529,288.795 L305.529,273.076 C305.529,271.836 306.149,271.217 307.389,271.217 C308.628,271.217 309.248,271.836 309.248,273.076 L309.248,287.529 L317.545,284.404 L317.545,268.592 C317.545,267.352 318.162,266.732 319.396,266.732 C320.631,266.732 321.248,267.352 321.248,268.592 L321.248,283.139 L324.482,281.967 C324.545,281.904 324.769,281.873 325.154,281.873 C325.612,281.873 326.102,282.066 326.623,282.451 C327.019,282.847 327.217,283.305 327.217,283.826 L327.217,289.873 C327.217,290.79 326.758,291.409 325.842,291.732 L321.248,293.295 L321.248,309.31 L324.482,308.232 C324.545,308.17 324.769,308.139 325.154,308.139 C325.612,308.139 326.102,308.336 326.623,308.732 C327.019,309.118 327.217,309.571 327.217,310.092 L327.217,316.154 C327.217,316.998 326.758,317.581 325.842,317.904 L321.248,319.67 L321.248,335.389 M317.545,294.764 L309.248,297.685 L309.248,313.701 L317.545,310.779 L317.545,294.764 "/>
<path class="KeySig" d="M296.248,385.389 C296.248,386.628 295.631,387.248 294.396,387.248 C293.162,387.248 292.545,386.628 292.545,385.389 L292.545,370.935 L284.248,374.06 L284.248,389.873 C284.248,391.112 283.628,391.732 282.389,391.732 C281.149,391.732 280.529,391.112 280.529,389.873 L280.529,375.326 L277.404,376.498 C277.342,376.56 277.081,376.592 276.623,376.592 C276.102,376.592 275.646,376.396 275.256,376.006 C274.865,375.615 274.67,375.159 274.67,374.639 L274.67,368.592 C274.67,367.612 275.092,366.993 275.935,366.732 L280.529,365.17 L280.529,349.154 L277.404,350.232 C277.342,350.295 277.081,350.326 276.623,350.326 C276.102,350.326 275.646,350.131 275.256,349.74 C274.865,349.349 274.67,348.894 274.67,348.373 L274.67,342.31 C274.67,341.404 275.092,340.821 275.935,340.56 L280.529,338.795 L280.529,323.076 C280.529,321.836 281.149,321.217 282.389,321.217 C283.628,321.217 284.248,321.836 284.248,323.076 L284.248,337.529 L292.545,334.404 L292.545,318.592 C292.545,317.352 293.162,316.732 294.396,316.732 C295.631,316.732 296.248,317.352 296.248,318.592 L296.248,333.139 L299.482,331.967 C299.545,331.904 299.769,331.873 300.154,331.873 C300.612,331.873 301.102,332.066 301.623,332.451 C302.019,332.847 302.217,333.305 302.217,333.826 L302.217,339.873 C302.217,340.79 301.758,341.409 300.842,341.732 L296.248,343.295 L296.248,359.31 L299.482,358.232 C299.545,358.17 299.769,358.139 300.154,358.139 C300.612,358.139 301.102,358.336 301.623,358.732 C302.019,359.118 302.217,359.571 302.217,360.092 L302.217,366.154 C302.217,366.998 301.758,367.581 300.842,367.904 L296.248,369.67 L296.248,385.389 M292.545,344.764 L284.248,347.685 L284.248,363.701 L292.545,360.779 L292.545,344.764 "/>
<path class="KeySig" d="M271.248,347.889 C271.248,349.128 270.631,349.748 269.396,349.748 C268.162,349.748 267.545,349.128 267.545,347.889 L267.545,333.435 L259.248,336.56 L259.248,352.373 C259.248,353.612 258.628,354.232 257.389,354.232 C256.149,354.232 255.529,353.612 255.529,352.373 L255.529,337.826 L252.404,338.998 C252.342,339.06 252.081,339.092 251.623,339.092 C251.102,339.092 250.646,338.896 250.256,338.506 C249.865,338.115 249.67,337.659 249.67,337.139 L249.67,331.092 C249.67,330.112 250.092,329.493 250.935,329.232 L255.529,327.67 L255.529,311.654 L252.404,312.732 C252.342,312.795 252.081,312.826 251.623,312.826 C251.102,312.826 250.646,312.631 250.256,312.24 C249.865,311.849 249.67,311.394 249.67,310.873 L249.67,304.81 C249.67,303.904 250.092,303.321 250.935,303.06 L255.529,301.295 L255.529,285.576 C255.529,284.336 256.149,283.717 257.389,283.717 C258.628,283.717 259.248,284.336 259.248,285.576 L259.248,300.029 L267.545,296.904 L267.545,281.092 C267.545,279.852 268.162,279.232 269.396,279.232 C270.631,279.232 271.248,279.852 271.248,281.092 L271.248,295.639 L274.482,294.467 C274.545,294.404 274.769,294.373 275.154,294.373 C275.612,294.373 276.102,294.566 276.623,294.951 C277.019,295.347 277.217,295.805 277.217,296.326 L277.217,302.373 C277.217,303.29 276.758,303.909 275.842,304.232 L271.248,305.795 L271.248,321.81 L274.482,320.732 C274.545,320.67 274.769,320.639 275.154,320.639 C275.612,320.639 276.102,320.836 276.623,321.232 C277.019,321.618 277.217,322.071 277.217,322.592 L277.217,328.654 C277.217,329.498 276.758,330.081 275.842,330.404 L271.248,332.17 L271.248,347.889 M267.545,307.264 L259.248,310.185 L259.248,326.201 L267.545,323.279 L267.545,307.264 "/>
<path class="TimeSig" d="M450.006,317.912 C451.954,317.912 453.612,317.685 454.982,317.232 C456.352,316.779 457.23,316.553 457.615,316.553 C458.073,316.553 458.433,316.683 458.693,316.943 C458.891,317.131 459.021,317.355 459.084,317.615 C459.084,317.751 459.016,317.948 458.881,318.209 L430.474,351.224 L447.162,351.224 L447.162,338.131 C447.162,337.287 447.391,336.568 447.849,335.974 C448.631,335.329 449.282,334.938 449.803,334.803 C450.646,334.417 451.688,333.506 452.928,332.068 C453.969,330.902 455.209,328.855 456.646,325.928 C456.834,325.532 457.126,325.334 457.521,325.334 C458.303,325.334 458.756,325.792 458.881,326.709 L458.881,351.224 L466.021,351.224 C466.928,351.224 467.448,351.709 467.584,352.678 C467.584,353.657 467.063,354.146 466.021,354.146 L458.881,354.146 L458.881,354.928 C458.881,357.532 459.532,359.745 460.834,361.568 C462.334,363.391 464.094,364.303 466.115,364.303 C466.896,364.303 467.287,364.693 467.287,365.474 C467.287,366.256 466.896,366.646 466.115,366.646 C464.751,366.646 462.537,366.454 459.474,366.068 C456.672,365.61 454.49,365.381 452.928,365.381 C451.303,365.381 449.12,365.61 446.381,366.068 C443.454,366.454 441.277,366.646 439.849,366.646 C439.068,366.646 438.678,366.256 438.678,365.474 C438.678,364.693 439.068,364.303 439.849,364.303 C441.86,364.303 443.615,363.391 445.115,361.568 C446.48,359.683 447.162,357.469 447.162,354.928 L447.162,354.146 L430.474,354.146 C429.36,354.146 428.579,353.886 428.131,353.365 C427.599,352.98 427.334,352.459 427.334,351.803 C427.334,351.605 427.823,350.922 428.803,349.756 C429.917,348.454 431.089,346.86 432.318,344.974 C433.756,342.756 435.126,340.474 436.428,338.131 C437.855,335.464 438.995,332.402 439.849,328.943 C440.818,325.433 441.303,321.855 441.303,318.209 C441.303,317.167 441.761,316.646 442.678,316.646 C442.876,316.646 443.297,316.745 443.943,316.943 C444.141,317.006 444.55,317.102 445.17,317.232 C445.79,317.362 446.292,317.49 446.678,317.615 C447.855,317.813 448.964,317.912 450.006,317.912"/>
<path class="TimeSig" d="M450.006,368.084 C451.954,368.084 453.612,367.857 454.982,367.404 C456.352,366.951 457.23,366.724 457.615,366.724 C458.073,366.724 458.433,366.855 458.693,367.115 C458.891,367.303 459.021,367.527 459.084,367.787 C459.084,367.922 459.016,368.12 458.881,368.381 L430.474,401.396 L447.162,401.396 L447.162,388.303 C447.162,387.459 447.391,386.74 447.849,386.146 C448.631,385.501 449.282,385.11 449.803,384.974 C450.646,384.589 451.688,383.678 452.928,382.24 C453.969,381.073 455.209,379.027 456.646,376.099 C456.834,375.704 457.126,375.506 457.521,375.506 C458.303,375.506 458.756,375.964 458.881,376.881 L458.881,401.396 L466.021,401.396 C466.928,401.396 467.448,401.881 467.584,402.849 C467.584,403.829 467.063,404.318 466.021,404.318 L458.881,404.318 L458.881,405.099 C458.881,407.704 459.532,409.917 460.834,411.74 C462.334,413.563 464.094,414.474 466.115,414.474 C466.896,414.474 467.287,414.865 467.287,415.646 C467.287,416.428 466.896,416.818 466.115,416.818 C464.751,416.818 462.537,416.626 459.474,416.24 C456.672,415.782 454.49,415.553 452.928,415.553 C451.303,415.553 449.12,415.782 446.381,416.24 C443.454,416.626 441.277,416.818 439.849,416.818 C439.068,416.818 438.678,416.428 438.678,415.646 C438.678,414.865 439.068,414.474 439.849,414.474 C441.86,414.474 443.615,413.563 445.115,411.74 C446.48,409.855 447.162,407.641 447.162,405.099 L447.162,404.318 L430.474,404.318 C429.36,404.318 428.579,404.058 428.131,403.537 C427.599,403.152 427.334,402.631 427.334,401.974 C427.334,401.777 427.823,401.094 428.803,399.928 C429.917,398.626 431.089,397.032 432.318,395.146 C433.756,392.928 435.126,390.646 436.428,388.303 C437.855,385.636 438.995,382.573 439.849,379.115 C440.818,375.605 441.303,372.027 441.303,368.381 C441.303,367.339 441.761,366.818 442.678,366.818 C442.876,366.818 443.297,366.917 443.943,367.115 C444.141,367.178 444.55,367.274 445.17,367.404 C445.79,367.534 446.292,367.662 446.678,367.787 C447.855,367.985 448.964,368.084 450.006,368.084"/>
<path class="Rest" d="M519.193,358.92 C519.193,357.743 519.849,356.441 521.162,355.014 C522.131,353.972 523.563,352.732 525.459,351.295 C526.886,350.326 528.282,348.862 529.646,346.904 C530.948,345.019 531.599,342.967 531.599,340.748 C531.599,338.144 530.756,335.836 529.068,333.826 L525.553,329.623 C525.292,329.362 525.162,329.037 525.162,328.646 C525.162,328.256 525.355,327.899 525.74,327.576 C526.198,327.243 526.589,327.076 526.912,327.076 C527.37,327.076 527.73,327.274 527.99,327.67 L543.131,345.639 C543.777,346.482 544.099,347.326 544.099,348.17 C544.099,349.347 543.448,350.649 542.146,352.076 C541.303,352.993 539.907,354.232 537.959,355.795 C536.459,356.701 535.027,358.165 533.662,360.185 C532.36,362.071 531.709,364.123 531.709,366.342 C531.709,369.081 532.49,371.394 534.053,373.279 L542.443,383.139 C542.641,383.336 542.803,383.665 542.928,384.123 C542.928,384.571 542.766,384.961 542.443,385.295 C541.985,385.618 541.594,385.779 541.271,385.779 C541.146,385.779 540.626,385.42 539.709,384.701 C538.73,383.92 537.428,383.17 535.803,382.451 C533.98,381.743 532.188,381.389 530.428,381.389 C528.803,381.389 527.469,381.842 526.428,382.748 C525.521,383.665 525.068,385.425 525.068,388.029 C525.068,391.998 526.011,395.123 527.896,397.404 C528.094,397.665 528.126,397.987 527.99,398.373 C527.865,398.633 527.636,398.764 527.303,398.764 C526.855,398.764 525.849,397.592 524.287,395.248 C522.652,392.779 521.12,389.946 519.693,386.748 C518.193,383.362 517.443,380.566 517.443,378.357 C517.443,375.555 518.777,374.154 521.443,374.154 C524.506,374.154 528.48,375.196 533.365,377.279 L520.178,361.451 C519.521,360.607 519.193,359.764 519.193,358.92"/>
<path class="Rest" d="M1083.45,358.92 C1083.45,357.743 1084.1,356.441 1085.42,355.014 C1086.38,353.972 1087.82,352.732 1089.71,351.295 C1091.14,350.326 1092.54,348.862 1093.9,346.904 C1095.2,345.019 1095.85,342.967 1095.85,340.748 C1095.85,338.144 1095.01,335.836 1093.32,333.826 L1089.81,329.623 C1089.55,329.362 1089.42,329.037 1089.42,328.646 C1089.42,328.256 1089.61,327.899 1089.99,327.576 C1090.45,327.243 1090.84,327.076 1091.17,327.076 C1091.62,327.076 1091.98,327.274 1092.24,327.67 L1107.38,345.639 C1108.03,346.482 1108.35,347.326 1108.35,348.17 C1108.35,349.347 1107.7,350.649 1106.4,352.076 C1105.56,352.993 1104.16,354.232 1102.21,355.795 C1100.71,356.701 1099.28,358.165 1097.92,360.185 C1096.61,362.071 1095.96,364.123 1095.96,366.342 C1095.96,369.081 1096.74,371.394 1098.31,373.279 L1106.7,383.139 C1106.89,383.336 1107.06,383.665 1107.18,384.123 C1107.18,384.571 1107.02,384.961 1106.7,385.295 C1106.24,385.618 1105.85,385.779 1105.53,385.779 C1105.4,385.779 1104.88,385.42 1103.96,384.701 C1102.98,383.92 1101.68,383.17 1100.06,382.451 C1098.23,381.743 1096.44,381.389 1094.68,381.389 C1093.06,381.389 1091.72,381.842 1090.68,382.748 C1089.78,383.665 1089.32,385.425 1089.32,388.029 C1089.32,391.998 1090.26,395.123 1092.15,397.404 C1092.35,397.665 1092.38,397.987 1092.24,398.373 C1092.12,398.633 1091.89,398.764 1091.56,398.764 C1091.11,398.764 1090.1,397.592 1088.54,395.248 C1086.91,392.779 1085.37,389.946 1083.95,386.748 C1082.45,383.362 1081.7,380.566 1081.7,378.357 C1081.7,375.555 1083.03,374.154 1085.7,374.154 C1088.76,374.154 1092.73,375.196 1097.62,377.279 L1084.43,361.451 C1083.78,360.607 1083.45,359.764 1083.45,358.92"/>
<path class="Rest" d="M1679.04,358.92 C1679.04,357.743 1679.7,356.441 1681.01,355.014 C1681.98,353.972 1683.41,352.732 1685.31,351.295 C1686.74,350.326 1688.13,348.862 1689.5,346.904 C1690.8,345.019 1691.45,342.967 1691.45,340.748 C1691.45,338.144 1690.61,335.836 1688.92,333.826 L1685.4,329.623 C1685.14,329.362 1685.01,329.037 1685.01,328.646 C1685.01,328.256 1685.21,327.899 1685.59,327.576 C1686.05,327.243 1686.44,327.076 1686.76,327.076 C1687.22,327.076 1687.58,327.274 1687.84,327.67 L1702.98,345.639 C1703.63,346.482 1703.95,347.326 1703.95,348.17 C1703.95,349.347 1703.3,350.649 1702,352.076 C1701.15,352.993 1699.76,354.232 1697.81,355.795 C1696.31,356.701 1694.88,358.165 1693.51,360.185 C1692.21,362.071 1691.56,364.123 1691.56,366.342 C1691.56,369.081 1692.34,371.394 1693.9,373.279 L1702.29,383.139 C1702.49,383.336 1702.65,383.665 1702.78,384.123 C1702.78,384.571 1702.62,384.961 1702.29,385.295 C1701.84,385.618 1701.45,385.779 1701.12,385.779 C1701,385.779 1700.48,385.42 1699.56,384.701 C1698.58,383.92 1697.28,383.17 1695.65,382.451 C1693.83,381.743 1692.04,381.389 1690.28,381.389 C1688.65,381.389 1687.32,381.842 1686.28,382.748 C1685.37,383.665 1684.92,385.425 1684.92,388.029 C1684.92,391.998 1685.86,395.123 1687.75,397.404 C1687.95,397.665 1687.98,397.987 1687.84,398.373 C1687.72,398.633 1687.49,398.764 1687.15,398.764 C1686.71,398.764 1685.7,397.592 1684.14,395.248 C1682.5,392.779 1680.97,389.946 1679.54,386.748 C1678.04,383.362 1677.29,380.566 1677.29,378.357 C1677.29,375.555 1678.63,374.154 1681.29,374.154 C1684.36,374.154 1688.33,375.196 1693.22,377.279 L1680.03,361.451 C1679.37,360.607 1679.04,359.764 1679.04,358.92"/>
<path class="Rest" d="M2243.3,358.92 C2243.3,357.743 2243.95,356.441 2245.27,355.014 C2246.24,353.972 2247.67,352.732 2249.56,351.295 C2250.99,350.326 2252.39,348.862 2253.75,346.904 C2255.05,345.019 2255.7,342.967 2255.7,340.748 C2255.7,338.144 2254.86,335.836 2253.17,333.826 L2249.66,329.623 C2249.4,329.362 2249.27,329.037 2249.27,328.646 C2249.27,328.256 2249.46,327.899 2249.85,327.576 C2250.3,327.243 2250.69,327.076 2251.02,327.076 C2251.48,327.076 2251.83,327.274 2252.1,327.67 L2267.24,345.639 C2267.88,346.482 2268.2,347.326 2268.2,348.17 C2268.2,349.347 2267.55,350.649 2266.25,352.076 C2265.41,352.993 2264.01,354.232 2262.06,355.795 C2260.56,356.701 2259.13,358.165 2257.77,360.185 C2256.46,362.071 2255.81,364.123 2255.81,366.342 C2255.81,369.081 2256.6,371.394 2258.16,373.279 L2266.55,383.139 C2266.75,383.336 2266.91,383.665 2267.03,384.123 C2267.03,384.571 2266.87,384.961 2266.55,385.295 C2266.09,385.618 2265.7,385.779 2265.38,385.779 C2265.25,385.779 2264.73,385.42 2263.81,384.701 C2262.83,383.92 2261.53,383.17 2259.91,382.451 C2258.08,381.743 2256.29,381.389 2254.53,381.389 C2252.91,381.389 2251.57,381.842 2250.53,382.748 C2249.63,383.665 2249.17,385.425 2249.17,388.029 C2249.17,391.998 2250.12,395.123 2252,397.404 C2252.2,397.665 2252.23,397.987 2252.1,398.373 C2251.97,398.633 2251.74,398.764 2251.41,398.764 C2250.96,398.764 2249.95,397.592 2248.39,395.248 C2246.76,392.779 2245.23,389.946 2243.8,386.748 C2242.3,383.362 2241.55,380.566 2241.55,378.357 C2241.55,375.555 2242.88,374.154 2245.55,374.154 C2248.61,374.154 2252.58,375.196 2257.47,377.279 L2244.28,361.451 C2243.63,360.607 2243.3,359.764 2243.3,358.92"/>
<path class="Tempo" d="M442.053,254.014 C441.099,253.17 439.771,252.748 438.209,252.748 C432.271,252.748 427.537,257.139 427.537,261.81 C427.537,264.639 429.818,266.31 432.756,266.31 C437.553,266.31 443.49,261.81 443.49,257.248 L443.49,226.529 L442.053,226.529 L442.053,254.014 "/>
<path class="Tempo" d="M495.381,246.873 L462.256,246.873 L462.256,241.107 L495.381,241.107 L495.381,246.873 M495.381,261.514 L462.256,261.514 L462.256,255.748 L495.381,255.748 L495.381,261.514 M523.537,232.06 C523.058,232.06 522.487,232.159 521.826,232.357 C521.165,232.555 520.464,232.795 519.724,233.076 C518.985,233.357 518.558,233.519 518.443,233.56 L518.443,231.998 L533.553,225.451 L534.584,225.451 L534.584,259.654 C534.584,261.977 534.982,263.487 535.779,264.185 C536.576,264.883 538.334,265.253 541.053,265.295 L541.053,266.732 L518.553,266.732 L518.553,265.295 C521.511,265.253 523.441,264.862 524.342,264.123 C525.243,263.383 525.693,261.774 525.693,259.295 L525.693,236.201 C525.693,233.441 524.974,232.06 523.537,232.06 M549.584,258.326 C551.021,258.326 552.959,259.146 555.396,260.787 C557.834,262.428 559.672,263.248 560.912,263.248 C562.599,263.248 564.021,262.68 565.178,261.545 C566.334,260.409 566.912,259.014 566.912,257.357 C566.912,255.399 566.162,253.633 564.662,252.06 C563.162,250.487 561.073,249.29 558.396,248.467 C556.157,247.758 552.558,247.227 547.599,246.873 L553.412,226.17 L572.74,226.17 L570.162,233.795 L553.474,233.795 L552.162,238.654 C556.318,238.894 559.334,239.29 561.209,239.842 C564.49,240.748 567.042,242.326 568.865,244.576 C570.688,246.826 571.599,249.487 571.599,252.56 C571.599,256.862 570.019,260.381 566.857,263.115 C563.696,265.849 559.636,267.217 554.678,267.217 C552.001,267.217 549.86,266.735 548.256,265.771 C546.652,264.808 545.849,263.529 545.849,261.935 C545.849,260.894 546.201,260.032 546.904,259.349 C547.607,258.667 548.501,258.326 549.584,258.326 M575.974,246.326 C575.974,240.451 577.274,235.503 579.873,231.482 C582.472,227.461 585.693,225.451 589.537,225.451 C593.412,225.451 596.641,227.461 599.224,231.482 C601.808,235.503 603.099,240.514 603.099,246.514 C603.099,252.555 601.818,257.566 599.256,261.545 C596.693,265.524 593.474,267.514 589.599,267.514 C585.599,267.514 582.329,265.534 579.787,261.576 C577.245,257.618 575.974,252.534 575.974,246.326 M589.599,265.826 C590.922,265.826 591.922,264.928 592.599,263.131 C593.277,261.334 593.615,258.097 593.615,253.42 L593.615,239.67 C593.615,235.232 593.295,232.034 592.654,230.076 C592.014,228.118 590.954,227.139 589.474,227.139 C588.037,227.139 587.008,228.097 586.389,230.014 C585.769,231.93 585.459,235.149 585.459,239.67 L585.459,253.42 C585.459,257.857 585.779,261.034 586.42,262.951 C587.06,264.868 588.12,265.826 589.599,265.826"/>
</svg>


Reading sheet music requires a considerable amount of musical background, but the most important takeway for us is that it essentially encodes music as a sequence of instructions.

### Our Representation
For our purposes, sheet music instructions are a bit too nuanced and so we will do something slightly different, while still keeping to its core idea.

First, we will assume the smallest duration possible is $\frac{1}{4}$ of a beat, i.e., a quarter-beat.

Then, we let `"0.i"` and `"1.i"` respectively denote the "note off" and "note on" instructions for the $i$th piano key, and `"w.t"` denote a "wait" instruction, where $t \in \lbrace 1, 2, 4, 8, 16 \rbrace$ is the number of quarter-beats to wait. We will also define two additional markers, `"BOS"` and `"EOS"` to denote the beginning and end of a sequence.

With 88 notes, we have 183 possible instructions.

In this scheme, the above sheet music could be represented with the following sequence:

`"w.4", "1.50", "1.53", "1.58", "w.4", "0.50", "0.53, "0.58" "w.4", "1.50", "1.53", "1.58", "w.4", "0.50", "0.53, "0.58" "w.4", "1.50", "1.53", "1.58", "w.4", "0.50", "0.53, "0.58" "w.4", "1.50", "1.53", "1.58", "w.4", "0.50", "0.53, "0.58"`

The character representations above are only for human readability. In practice, each of these instructions will be encoded as a one-hot vector. In this way, we can represent music as a sequence of one-hot vectors, $\mathbf{i}^{(1)},\dots,\mathbf{i}^{(S)} \in \mathbb{1}^{183}$, where $\mathbb{1}^{183}$ is the set of all possible 183-dimensional one-hot vectors.

Actually, we could simply associate each character representation with a numerical index, $k$. The corresponding one-hot vector, $\mathbf{i}$, will be such that $\mathbf{i}_k = 1$ and $\mathbf{i}_j = 0, \forall k \neq j$. In this way, we can represent music as a single vector, $\mathbf{s} \in \mathbb{N}^{S}$.

Both representations will be useful as we will see later. For now, we write some code to convert back and forth between them:

    types = ["note_on", "note_off"]
    waits = [48, 24, 12, 6, 4, 3, 2, 1]

    instruction_set = []

    #delimiter
    DELIM = "."
    
    #note markers.
    NOTE_INS = "n"
    NOTE_OFF = "00"
    NOTE_ON  = "01"
    
    instruction_set.extend([NOTE_INS + DELIM + NOTE_OFF + DELIM + str(note) for note in range(1, 89)])
    instruction_set.extend([NOTE_INS + DELIM + NOTE_ON + DELIM + str(note) for note in range(1, 89)])
    
    #rest markers.
    WAIT_INS = "w"
    for i in range(12):
      instruction_set.extend([WAIT_INS + DELIM + str(i).zfill(2) + DELIM + str(wait) for wait in waits])
    
    #sequence markers.
    BOS = "BOS"
    EOS = "EOS"
    instruction_set.extend([BOS, EOS])
    
    instruction_to_index = {instruction: index for index, instruction in enumerate(instruction_set)}
    index_to_instruction = {index: instruction for index, instruction in enumerate(instruction_set)}
